{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/upload-cv":{"post":{"summary":"Upload Cv","description":"Upload a new CV document\n\nAccepts either a PDF file or metadata (or both)","operationId":"upload_cv_upload_cv_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_cv_upload_cv_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CVUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cv":{"get":{"summary":"Get All","description":"מחזיר את כל המסמכים\n- deleted=None או False: רק מסמכים שלא מחוקים (ברירת מחדל)\n- deleted=True: רק מסמכים מחוקים","operationId":"get_all_cv_get","parameters":[{"name":"deleted","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"True - רק מחוקים, False/None - רק לא מחוקים","title":"Deleted"},"description":"True - רק מחוקים, False/None - רק לא מחוקים"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cv/search":{"get":{"summary":"Search Cv","description":"חיפוש מתקדם במסמכי CV\n\nתומך בחיפוש חופשי (בכל השדות) ובחיפוש לפי שדות ספציפיים:\n- current_status: סטטוס נוכחי\n- job_type: סוג עבודה\n- match_score: טווח ציון התאמה (below 70, 70-79, 80-89, 90-100, all match_score)\n- campaign: קמפיין\n- country: ארץ (nationality)\n\nניתן לשלב מספר קריטריונים - החיפוש יחזיר מסמכים התואמים לכל הקריטריונים.","operationId":"search_cv_cv_search_get","parameters":[{"name":"free_text","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש חופשי - יחפש את הערך בכל שדה במסמך","title":"Free Text"},"description":"חיפוש חופשי - יחפש את הערך בכל שדה במסמך"},{"name":"current_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש לפי סטטוס נוכחי","title":"Current Status"},"description":"חיפוש לפי סטטוס נוכחי"},{"name":"job_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש לפי סוג עבודה","title":"Job Type"},"description":"חיפוש לפי סוג עבודה"},{"name":"match_score","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש לפי טווח ציון התאמה: 'below 70', '70-79', '80-89', '90-100', 'all match_score'","title":"Match Score"},"description":"חיפוש לפי טווח ציון התאמה: 'below 70', '70-79', '80-89', '90-100', 'all match_score'"},{"name":"campaign","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש לפי קמפיין","title":"Campaign"},"description":"חיפוש לפי קמפיין"},{"name":"country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"חיפוש לפי ארץ (nationality)","title":"Country"},"description":"חיפוש לפי ארץ (nationality)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cv/{id}":{"get":{"summary":"Get Cv By Id","description":"Get a CV document by ID (returns deleted documents too)","operationId":"get_cv_by_id_cv__id__get","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Cv By Id","description":"Soft delete a document by setting is_deleted to True","operationId":"delete_cv_by_id_cv__id__delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"summary":"Update Cv","description":"Update a document - updates only fields provided in body (except phone_number which cannot be updated)\nAccepts JSON with fields to update","operationId":"update_cv_cv__id__patch","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CVUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cv/{id}/restore":{"post":{"summary":"Restore Cv By Id","description":"Restore a deleted document by setting is_deleted to False","operationId":"restore_cv_by_id_cv__id__restore_post","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cv/{id}/status":{"patch":{"summary":"Update Cv Status","description":"Update document status by status ID\n\n- Updates current_status\n- Adds new status to status_history with timestamp\n\n**Available statuses:**\n- 1: Submitted\n- 2: Extracting\n- 3: Waiting Bot Interview\n- 4: Bot Interview\n- 5: Waiting Classification\n- 6: In Classification\n- 7: Ready For Recruit","operationId":"update_cv_status_cv__id__status_patch","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/process-waiting-for-bot":{"post":{"summary":"Trigger Bot Processor","description":"מפעיל ידנית את השירות לעיבוד רשומות עם סטטוס waiting_for_bot\nשירות זה רץ אוטומטית כל יום ב-10:00 בבוקר, אבל ניתן להפעיל אותו ידנית דרך endpoint זה","operationId":"trigger_bot_processor_process_waiting_for_bot_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/process-waiting-classification":{"post":{"summary":"Trigger Classification Processor","description":"מפעיל ידנית את השירות לעיבוד רשומות עם סטטוס waiting_classification\nשירות זה רץ אוטומטית כל X דקות, אבל ניתן להפעיל אותו ידנית דרך endpoint זה","operationId":"trigger_classification_processor_process_waiting_classification_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_cv_upload_cv_post":{"properties":{"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"Body_upload_cv_upload_cv_post"},"CVUpdateRequest":{"properties":{"latin_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Latin Name","description":"שם לטיני"},"hebrew_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hebrew Name","description":"שם עברי"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"כתובת אימייל"},"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign","description":"קמפיין"},"age":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Age","description":"גיל"},"nationality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nationality","description":"לאום"},"can_travel_europe":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Can Travel Europe","description":"יכול לנסוע לאירופה"},"can_visit_israel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Can Visit Israel","description":"יכול לבקר בישראל"},"lives_in_europe":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lives In Europe","description":"גר באירופה"},"native_israeli":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Native Israeli","description":"ישראלי יליד"},"english_level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"English Level","description":"רמת אנגלית"},"remembers_job_application":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Remembers Job Application","description":"זוכר את בקשת העבודה"},"skills_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Skills Summary","description":"סיכום כישורים"},"job_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Type","description":"סוג עבודה"},"match_score":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Match Score","description":"ציון התאמה"},"class_explain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Class Explain","description":"הסבר קלאסיפיקציה"}},"type":"object","title":"CVUpdateRequest","description":"Model לעדכון מסמך CV - כל השדות אופציונליים (למעט phone_number שאי אפשר לעדכן)","example":{"age":"30","campaign":"Summer 2024","can_travel_europe":"yes","can_visit_israel":"yes","email":"example@email.com","english_level":"Advanced","hebrew_name":"יוחנן דו","latin_name":"John Doe","lives_in_europe":"no","nationality":"Israeli","native_israeli":"yes","remembers_job_application":"yes","skills_summary":"Experienced professional with expertise in various fields. Strong background in technical and interpersonal skills."}},"CVUploadResponse":{"properties":{"id":{"type":"string","title":"Id"},"status":{"type":"string","title":"Status"}},"type":"object","required":["id","status"],"title":"CVUploadResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"StatusUpdateRequest":{"properties":{"status_id":{"type":"integer","maximum":7.0,"minimum":1.0,"title":"Status Id","description":"ID של הסטטוס החדש לעדכון. ערכים תקפים: 1=Submitted, 2=Extracting, 3=Waiting Bot Interview, 4=Bot Interview, 5=Waiting Classification, 6=In Classification, 7=Ready For Recruit","example":1}},"type":"object","required":["status_id"],"title":"StatusUpdateRequest","description":"סטטוסים זמינים: 1=Submitted, 2=Extracting, 3=Waiting Bot Interview, 4=Bot Interview, 5=Waiting Classification, 6=In Classification, 7=Ready For Recruit","example":{"status_id":1}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}